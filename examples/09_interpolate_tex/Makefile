# Builds main app

APPNAME = interpolate_tex

# Setup compiler

CXX 			= g++
CXXFLAGS += -ansi -pedantic -Wall -Wextra -std=c++14
CXXFLAGS += -MP -MMD
DBGFLAGS  = -ggdb3 -DDEBUG -O0
DBGFLAGS += -pg -no-pie
RLSFLAGS  = -O2

# Other stuff

SRCFILES 	= $(wildcard *.cc)
.PHONY: clean

##############################################################################

# Builds main app (release)

$(APPNAME) : $(APPNAME).cc
	$(CXX) $(CXXFLAGS) $(RLSFLAGS) $< -o $@

#############################################################################

# Includes dependicies files early generated by gcc with -MP -MMD opts

-include $(SRCFILES:%.cc=%.d)

# Cleans garbage (local)

lclean :
	rm -rf gmon.out		# profiler out
	rm -rf $(APPNAME) $(APPNAME)_* *.d *.o 

# Cleans garbage (all)

clean :
	rm -rf gmon.out
	rm -rf $(APPNAME) $(APPNAME)_* *.d *.o 